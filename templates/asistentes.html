<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>GestiÃ³n de Asistentes</title>
    <link rel="stylesheet" href="/static/styles.css">
    <style>
        input[type="text"], input[type="password"] {
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            width: 90%;
            margin: 4px 0;
        }
        form.inline {
            display: inline;
        }
        .acciones button {
            margin: 2px;
        }
    </style>
</head>
<body>
    <h1>âš™ï¸ GestiÃ³n de Asistentes</h1>

    {% if nombre_asistente %}
    <div style="text-align: center; margin-bottom: 15px;">
        <strong>ğŸ‘‹ Bienvenido/a, {{ nombre_asistente }}</strong>
        |
        <a href="/logout"><button class="btn volver">Cerrar sesiÃ³n</button></a>
    </div>
    {% endif %}

    <div style="text-align: center; margin-bottom: 20px;">
        <a href="/panel"><button class="btn volver">â¬… Volver al panel</button></a>
    </div>

    <h2>â• Crear nuevo asistente</h2>
    <form method="POST" action="/asistentes/crear">
        <input type="text" name="nombre" placeholder="Nombre completo" required>
        <input type="text" name="codigo" maxlength="6" minlength="6" placeholder="CÃ³digo Ãºnico (6 caracteres)" required>
        <input type="password" name="contraseÃ±a" placeholder="ContraseÃ±a" required>
        <button type="submit" class="btn filtrar">Crear asistente</button>
    </form>

    <h2 style="margin-top: 40px;">ğŸ“‹ Lista de asistentes registrados</h2>
    {% if asistentes %}
    <table>
        <thead>
            <tr>
                <th>Nombre</th>
                <th>CÃ³digo</th>
                <th>ContraseÃ±a</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for asistente in asistentes %}
            <tr>
                <form method="POST" action="/asistentes/editar">
                    <td>
                        <input type="text" name="nombre" value="{{ asistente[1] }}" required>
                    </td>
                    <td>
                        <input type="text" name="codigo" value="{{ asistente[2] }}" readonly>
                    </td>
                    <td>
                        <input type="password" name="contraseÃ±a" value="{{ asistente[3] }}" required>
                    </td>
                    <td class="acciones">
                        <button type="submit" class="btn presencia">ğŸ’¾ Guardar</button>
                    </form>
                    <form method="POST" action="/asistentes/eliminar" class="inline">
                        <input type="hidden" name="codigo" value="{{ asistente[2] }}">
                        <button type="submit" class="btn borrar" onclick="return confirm('Â¿Eliminar a {{ asistente[1] }}?')">ğŸ—‘ Eliminar</button>
                    </form>
                    </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p style="text-align:center;">âš ï¸ No hay asistentes registrados aÃºn.</p>
    {% endif %}
</body>
</html>
